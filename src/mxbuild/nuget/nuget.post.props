<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="12.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <!--NugetReference -> Reference-->
  <ItemGroup>
    <Reference Include="@(NugetReference->'%(Identity)')">
      <HintPath>%(HintPath)</HintPath>
    </Reference>
  </ItemGroup>

  <!--NugetReference -> NugetPackage-->
  <ItemGroup>
    <NugetPackage Include="@(NugetReference->'%(Package)')">
      <Version>%(Version)</Version>
      <TargetFramework>%(TargetFramework)</TargetFramework>
    </NugetPackage>
  </ItemGroup>

  <!--enumerate targets-->
  <PropertyGroup>
    <NugetImports>$(NugetImports.Trim(';'))</NugetImports>
    <NugetImportCount>$(NugetImports.Split(';').Length)</NugetImportCount>
    <NugetImportCount Condition="'$(NugetImports)'==''">0</NugetImportCount>

    <NugetImportIndex>0</NugetImportIndex>

    <NugetImportFinished
      Condition="$(NugetImportCount) == 0 OR '$(SkipNugetImports)'=='true'"
    >true</NugetImportFinished>

    <NugetImportCurrent Condition="'$(NugetImportFinished)'!='true'"
      >$(NugetImports.Split(';')[$(NugetImportIndex)])</NugetImportCurrent>
  </PropertyGroup>

  <Import Project="$(RefDir)$(NugetImportCurrent)" Condition="'$(NugetImportFinished)'!='true'" />  
</Project>